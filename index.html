<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Simulasi Fixed Ratio</title>
    <style>
        /* RESET */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: #000; /* Latar Belakang Hitam (Letterbox) */
            margin: 0; padding: 0;
            width: 100vw; height: 100dvh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- WADAH UTAMA (JANTUNG KODE INI) --- */
        #main-stage {
            position: relative;
            
            /* 1. KITA KUNCI RASIO 9:19.5 (Standar Screenshot HP Modern) */
            /* Jika gambar Anda gepeng, ganti angka 19.5 jadi lebih kecil */
            aspect-ratio: 9 / 19.5;

            /* 2. Logika agar pas di layar TANPA MELAR */
            /* Tinggi mentok layar, Lebar menyesuaikan rasio */
            height: 100dvh;
            width: auto;

            /* 3. Penjaga: Jika layar terlalu lebar/pendek, batasi */
            max-width: 100vw;
            
            /* Style */
            background: #000;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            overflow: hidden;
        }

        /* Jika layar HP lebih lebar dari rasionya (misal Tablet/Desktop) */
        /* Kita balik logikanya: Lebar mentok layar, tinggi menyesuaikan */
        @media (min-aspect-ratio: 9/19.5) {
            #main-stage {
                width: 100vw;
                height: auto;
                max-height: 100dvh;
            }
        }

        /* --- BACKGROUND GAMBAR --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            
            /* Gambar dipaksa memenuhi wadah yang SUDAH DIKUNCI rasionya */
            /* Karena wadah tidak melar, gambar pun aman */
            background-size: 100% 100%; 
            background-position: center;
            background-repeat: no-repeat;
            
            opacity: 0; visibility: hidden; pointer-events: none;
        }
        .screen.active { opacity: 1; visibility: visible; pointer-events: auto; }

        /* --- AREA KLIK --- */
        .click-area {
            position: absolute; z-index: 10; cursor: pointer;
            background: transparent; 
            /* UNCOMMENT BARIS DI BAWAH UNTUK CEK POSISI KOTAK (DEBUG) */
            /* border: 2px solid red; background: rgba(255,0,0,0.2); */
        }
        .click-area:active { background-color: rgba(255, 255, 255, 0.1); }

        /* SCROLL LOGIC STYLE */
        .scroll-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow-y: hidden; 
        }
        .scroll-content {
            width: 100%; height: 100%; overflow-y: scroll;
            scrollbar-width: none; -webkit-overflow-scrolling: touch;
        }
        .scroll-content::-webkit-scrollbar { display: none; }
        .scroll-content img { width: 100%; display: block; }
        .scroll-trigger { position: absolute; z-index: 20; }

        /* UI LAINNYA */
        #hint-btn {
            position: fixed; top: 20px; left: 20px; font-size: 24px; z-index: 9999; 
            opacity: 0.3; cursor: pointer; color: white;
        }
        /* Mode Petunjuk */
        body.show-hint .click-area { 
            border: 2px solid #ff3b30; 
            background: rgba(255,59,48,0.2); 
            animation: blink 1s infinite; 
        }
        body.show-hint .scroll-trigger { border: 2px dashed cyan; }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* OVERLAY */
        #overlay, #finish {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 5000; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
        }
        #finish { display: none; background: #111; color: white; }
        button {
            padding: 12px 40px; border-radius: 50px; background: #28a745; 
            color: white; font-weight: bold; border: none; font-size: 16px;
        }
    </style>
</head>
<body>

    <div id="hint-btn" onclick="document.body.classList.toggle('show-hint')">⚙️</div>

    <div id="overlay">
        <h2 style="color:white; margin-bottom:20px;">Simulasi Trading</h2>
        <button onclick="startGame()">MULAI</button>
    </div>

    <div id="main-stage">
        
        <div class="screen active" id="screen-1" style="background-image: url('1.jpg');">
            <div id="box-1" class="click-area" 
                 style="top: 73%; left: 26%; width: 18%; height: 9%;" 
                 onclick="next(2)"></div>
        </div>
        
        <div class="screen" id="screen-2" style="background-image: url('2.jpg');">
            <div id="box-2" class="click-area" style="top: 17%; left: 0%; width: 100%; height: 10%;" onclick="next(3)"></div>
        </div>

        <div class="screen" id="screen-3" style="background-image: url('3.jpg');">
            <div id="box-3" class="click-area" style="top: 0%; left: 30%; width: 70%; height: 8%;" onclick="next(4)"></div>
        </div>

        <div class="screen" id="screen-4" style="background-image: url('4.jpg');">
            <div id="box-4" class="click-area" style="top: 50%; left: 5%; width: 90%; height: 25%;" onclick="next(5)"></div>
        </div>

        <div class="screen" id="screen-5" style="background-image: url('5.jpg');">
            <div id="box-5" class="click-area" style="top: 0%; left: 0%; width: 15%; height: 8%;" onclick="next(6)"></div>
        </div>

        <div class="screen" id="screen-6" style="background-image: url('6.jpg');">
            <div id="box-6" class="click-area" style="top: 60%; left: 26%; width: 18%; height: 9%;" onclick="next(7)"></div>
        </div>

        <div class="screen" id="screen-7" style="background-image: url('7.jpg');">
            <div id="box-7" class="click-area" style="bottom: 0%; left: 25%; width: 25%; height: 8%;" onclick="next(8)"></div>
        </div>

        <div class="screen" id="screen-8">
            <div class="scroll-wrapper">
                <div class="scroll-content" onscroll="checkScroll(this)">
                    <img src="8.jpg" alt="Scroll Content">
                    <div style="height: 100px;"></div> 
                </div>
            </div>
            <div id="scroll-trigger" class="scroll-trigger" 
                 style="top: 30%; left: 10%; width: 80%; height: 40%;"></div>
        </div>

        <div class="screen" id="screen-9" style="background-image: url('9.jpg');">
            <div id="box-9" class="click-area" style="top: 35%; right: 5%; width: 40%; height: 6%;" onclick="next(10)"></div>
        </div>

        <div class="screen" id="screen-10" style="background-image: url('10.jpg');">
            <div id="box-10a" class="click-area" style="top: 45%; left: 5%; width: 15%; height: 5%;" onclick="step10Part2()"></div>
            <div id="box-10b" class="click-area" style="display:none; top: 55%; left: 5%; width: 43%; height: 7%;" onclick="next(11)"></div>
        </div>

        <div class="screen" id="screen-11" style="background-image: url('11.jpg');">
            <div id="box-11" class="click-area" style="top: 55%; right: 10%; width: 35%; height: 6%;" onclick="next(12)"></div>
        </div>

        <div class="screen" id="screen-12" style="background-image: url('12.jpg');">
            <div id="box-12" class="click-area" style="bottom: 10%; left: 25%; width: 50%; height: 8%;" onclick="finish()"></div>
        </div>

    </div>

    <div id="finish">
        <h1 style="color:#28a745;">BERHASIL!</h1>
        <button onclick="location.reload()" style="background:#333;">ULANGI</button>
    </div>

    <script>
        function startGame() {
            if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen().catch(()=>{});
            document.getElementById('overlay').style.display = 'none';
        }

        function next(id) {
            document.querySelector('.screen.active').classList.remove('active');
            document.getElementById('screen-' + id).classList.add('active');
        }

        function step10Part2() {
            document.getElementById('box-10a').style.display = 'none';
            document.getElementById('box-10b').style.display = 'block';
        }

        function finish() {
            document.querySelector('.screen.active').classList.remove('active');
            document.getElementById('finish').style.display = 'flex';
        }

        // Logic Scroll / Swipe Manual
        const trigger = document.getElementById('scroll-trigger');
        let startY = 0;
        
        trigger.addEventListener('touchstart', e => startY = e.touches[0].clientY, {passive:true});
        trigger.addEventListener('touchend', e => {
            if(startY - e.changedTouches[0].clientY > 40) next(9);
        }, {passive:true});

        trigger.addEventListener('mousedown', e => {
            startY = e.clientY;
            const mouseUpHandler = mu => {
                if(startY - mu.clientY > 40) next(9);
                document.removeEventListener('mouseup', mouseUpHandler);
            };
            document.addEventListener('mouseup', mouseUpHandler);
        });

        // Opsional: Deteksi jika user beneran scroll gambar
        function checkScroll(el) {
            if(el.scrollTop > 100) { // Jika sudah scroll sedikit ke bawah
                // next(9); // Aktifkan baris ini jika ingin auto-next saat discroll
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Simulasi Trading Full Screen</title>
    <style>
        /* --- STYLE DASAR --- */
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #000; /* Latar belakang hitam pekat agar fokus */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh; /* Tinggi memenuhi layar */
            width: 100vw;  /* Lebar memenuhi layar */
            margin: 0;
            overflow: hidden;
            touch-action: none;
        }

        /* --- KONTROL TOMBOL (Floating/Melayang) --- */
        #controls {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.6); /* Semi transparan */
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            gap: 10px;
            backdrop-filter: blur(5px);
            transition: opacity 0.3s;
        }
        
        /* Sembunyikan kontrol jika mouse diam (opsional, tapi biar bersih) */
        #controls:hover { opacity: 1; }

        button {
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            color: white;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.95); }

        .btn-edit { background-color: #FFC107; color: black; }
        .btn-lock { background-color: #28a745; }
        .btn-reset { background-color: #dc3545; }
        .btn-fullscreen { background-color: #17a2b8; }

        /* --- WADAH HP (RESPONSIF FULL SCREEN) --- */
        #phone-container {
            position: relative;
            
            /* RUMUS FULL SCREEN RESPONSIF */
            /* Tinggi ambil 95% dari layar agar tidak terlalu mepet */
            height: 95vh; 
            
            /* Aspek Rasio dikunci sesuai ukuran screenshot HP modern (kira-kira 9:19) */
            /* Menggunakan rasio 360/760 dari request awal */
            aspect-ratio: 360 / 760;
            
            /* Pastikan lebar tidak melebihi layar (penting untuk mode Portrait) */
            max-width: 95vw; 

            background-color: #000;
            border-radius: 2vh; /* Radius menyesuaikan tinggi layar */
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            overflow: hidden;
            border: 2px solid #333;
            transition: border-color 0.3s;
        }

        /* Mode Landscape: Otomatis menyesuaikan agar tetap di tengah */
        @media (orientation: landscape) {
            #phone-container {
                height: 90vh; /* Sedikit lebih kecil di landscape biar enak dilihat */
            }
        }

        /* Indikator Visual Mode Edit */
        body.editing-mode #phone-container {
            border: 2px dashed #FFC107;
        }

        /* --- LAYAR GAMBAR --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none;
            background-size: 100% 100%; /* Memaksa gambar memenuhi kotak container */
            background-position: center;
            background-repeat: no-repeat;
        }

        .screen.active { display: block; }

        .screen::after {
            content: "‚ö†Ô∏è " attr(data-img) " ?\A Cek nama file.";
            white-space: pre-wrap;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: #ff6b6b;
            font-size: 14px;
            text-align: center;
            z-index: -1;
        }

        /* --- AREA KLIK (KOTAK MERAH) --- */
        .click-area {
            position: absolute;
            box-sizing: border-box;
            z-index: 10;
            touch-action: none;
        }

        /* Mode Main */
        body:not(.editing-mode) .click-area {
            cursor: pointer;
            border: 3px solid red;
            background-color: rgba(255, 0, 0, 0.15);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { opacity: 1; transform: scale(1); box-shadow: 0 0 10px red; }
            to { opacity: 0.6; transform: scale(1.02); box-shadow: 0 0 20px red; }
        }

        /* Mode Edit */
        body.editing-mode .click-area {
            cursor: move;
            border: 2px dashed #FFC107;
            background-color: rgba(255, 193, 7, 0.3);
            animation: none;
        }

        /* Resizer (Pengubah Ukuran) */
        .resizer {
            width: 25px; height: 25px;
            background: #007bff;
            border: 2px solid white;
            border-radius: 50%;
            position: absolute;
            right: -10px; bottom: -10px;
            cursor: se-resize;
            display: none;
            z-index: 20;
        }

        body.editing-mode .resizer { display: block; }

        /* Layar Selesai */
        #finish-screen {
            background-color: #1a1a1a;
            color: white;
            display: none; 
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            text-align: center;
            height: 100%; width: 100%;
        }
        #finish-screen h1 { color: #28a745; margin-bottom: 20px; font-size: 2vh; }
    </style>
</head>
<body>

    <!-- KONTROL -->
    <div id="controls">
        <button id="btn-mode" class="btn-edit" onclick="toggleEditMode()">üîì Edit</button>
        <button class="btn-fullscreen" onclick="toggleFullScreen()">‚õ∂ Full</button>
        <button class="btn-reset" onclick="resetPositions()">‚ö†Ô∏è Reset</button>
    </div>

    <!-- WADAH HP -->
    <div id="phone-container">
        
        <!-- 1. Telegram -->
        <div class="screen active" id="screen-1" style="background-image: url('1.jpg');" data-img="1.jpg">
            <div id="box-1" class="click-area" style="top: 73%; left: 26%; width: 18%; height: 9%;" onclick="handleNav(2)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 2. Group -->
        <div class="screen" id="screen-2" style="background-image: url('2.jpg');" data-img="2.jpg">
            <div id="box-2" class="click-area" style="top: 17%; left: 0%; width: 100%; height: 10%;" onclick="handleNav(3)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 3. Pin -->
        <div class="screen" id="screen-3" style="background-image: url('3.jpg');" data-img="3.jpg">
            <div id="box-3" class="click-area" style="top: 0%; left: 30%; width: 70%; height: 8%;" onclick="handleNav(4)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 4. Kartu Sinyal -->
        <div class="screen" id="screen-4" style="background-image: url('4.jpg');" data-img="4.jpg">
            <div id="box-4" class="click-area" style="top: 50%; left: 5%; width: 90%; height: 25%;" onclick="handleNav(5)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 5. Home Telegram -->
        <div class="screen" id="screen-5" style="background-image: url('5.jpg');" data-img="5.jpg">
            <div id="box-5" class="click-area" style="top: 0%; left: 0%; width: 15%; height: 8%;" onclick="handleNav(6)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 6. App Opalp -->
        <div class="screen" id="screen-6" style="background-image: url('6.jpg');" data-img="6.jpg">
            <div id="box-6" class="click-area" style="top: 60%; left: 26%; width: 18%; height: 9%;" onclick="handleNav(7)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 7. Kontrak -->
        <div class="screen" id="screen-7" style="background-image: url('7.jpg');" data-img="7.jpg">
            <div id="box-7" class="click-area" style="bottom: 0%; left: 25%; width: 25%; height: 8%;" onclick="handleNav(8)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 8. Scroll Area -->
        <div class="screen" id="screen-8" style="background-image: url('8.jpg');" data-img="8.jpg">
            <div id="box-8" class="click-area" style="top: 20%; left: 10%; width: 80%; height: 60%;" onclick="handleNav(9)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 9. Nomor Periode -->
        <div class="screen" id="screen-9" style="background-image: url('9.jpg');" data-img="9.jpg">
            <div id="box-9" class="click-area" style="top: 35%; right: 5%; width: 40%; height: 6%;" onclick="handleNav(10)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- 10. 1% & Hijau -->
        <div class="screen" id="screen-10" style="background-image: url('10.jpg');" data-img="10.jpg">
            <!-- Bagian 1: 1% -->
            <div id="box-10a" class="click-area" style="top: 45%; left: 5%; width: 15%; height: 5%;" onclick="step10Part2()">
                <div class="resizer"></div>
            </div>
            <!-- Bagian 2: Hijau (Hidden awal) -->
            <div id="box-10b" class="click-area" style="display:none; top: 55%; left: 5%; width: 43%; height: 7%; background-color: rgba(0, 255, 0, 0.2); border-color: lime;" onclick="finishSimulation()">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- Finish -->
        <div class="screen" id="finish-screen">
            <h1>‚úÖ TRANSAKSI BERHASIL!</h1>
            <button class="btn-edit" onclick="location.reload()">Ulangi</button>
        </div>
        
    </div>

    <script>
        let isEditing = false;
        const container = document.getElementById('phone-container');

        window.onload = function() {
            loadPositions();
            initDragAndResizeListeners();
        };

        // --- FULL SCREEN LOGIC ---
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // --- NAVIGASI ---
        function handleNav(stepNumber) {
            if (isEditing) return;
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const target = document.getElementById('screen-' + stepNumber);
            if(target) target.classList.add('active');
        }

        function step10Part2() {
            if (isEditing) return;
            document.getElementById('box-10a').style.display = 'none';
            document.getElementById('box-10b').style.display = 'block';
        }

        function finishSimulation() {
            if (isEditing) return;
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('finish-screen').style.display = 'flex';
        }

        // --- EDIT MODE ---
        function toggleEditMode() {
            isEditing = !isEditing;
            const btn = document.getElementById('btn-mode');
            const body = document.body;
            
            if (isEditing) {
                body.classList.add('editing-mode');
                btn.innerHTML = "üîí Main";
                btn.className = "btn-lock";
                document.getElementById('box-10a').style.display = 'block';
                document.getElementById('box-10b').style.display = 'block';
            } else {
                body.classList.remove('editing-mode');
                btn.innerHTML = "üîì Edit";
                btn.className = "btn-edit";
                savePositions();
                document.getElementById('box-10a').style.display = 'block';
                document.getElementById('box-10b').style.display = 'none';
            }
        }

        // --- DRAG & RESIZE SYSTEM (TOUCH & MOUSE) ---
        function getCoords(e) {
            return (e.touches && e.touches[0]) ? { x: e.touches[0].clientX, y: e.touches[0].clientY } : { x: e.clientX, y: e.clientY };
        }

        function initDragAndResizeListeners() {
            const boxes = document.querySelectorAll('.click-area');
            boxes.forEach(box => {
                const resizer = box.querySelector('.resizer');

                // RESIZE
                const startResize = (e) => {
                    if (!isEditing) return;
                    e.stopPropagation();
                    const startCoords = getCoords(e);
                    const startW = box.offsetWidth;
                    const startH = box.offsetHeight;
                    const cW = container.offsetWidth;
                    const cH = container.offsetHeight;

                    const onMove = (mv) => {
                        const curr = getCoords(mv);
                        box.style.width = ((startW + (curr.x - startCoords.x)) / cW * 100) + '%';
                        box.style.height = ((startH + (curr.y - startCoords.y)) / cH * 100) + '%';
                    };
                    const onEnd = () => removeLs(onMove, onEnd);
                    addLs(onMove, onEnd);
                };

                // DRAG
                const startDrag = (e) => {
                    if (!isEditing || e.target.classList.contains('resizer')) return;
                    if(e.type === 'touchstart') e.preventDefault();
                    const startCoords = getCoords(e);
                    const rect = box.getBoundingClientRect();
                    const cRect = container.getBoundingClientRect();
                    const startL = rect.left - cRect.left;
                    const startT = rect.top - cRect.top;

                    const onMove = (mv) => {
                        if(mv.type === 'touchmove') mv.preventDefault();
                        const curr = getCoords(mv);
                        box.style.left = ((startL + (curr.x - startCoords.x)) / container.offsetWidth * 100) + '%';
                        box.style.top = ((startT + (curr.y - startCoords.y)) / container.offsetHeight * 100) + '%';
                    };
                    const onEnd = () => removeLs(onMove, onEnd);
                    addLs(onMove, onEnd);
                };

                if(resizer) {
                    resizer.addEventListener('mousedown', startResize);
                    resizer.addEventListener('touchstart', startResize, {passive: false});
                }
                box.addEventListener('mousedown', startDrag);
                box.addEventListener('touchstart', startDrag, {passive: false});
            });
        }

        function addLs(mv, end) {
            document.addEventListener('mousemove', mv);
            document.addEventListener('mouseup', end);
            document.addEventListener('touchmove', mv, {passive: false});
            document.addEventListener('touchend', end);
        }
        function removeLs(mv, end) {
            document.removeEventListener('mousemove', mv);
            document.removeEventListener('mouseup', end);
            document.removeEventListener('touchmove', mv);
            document.removeEventListener('touchend', end);
        }

        // --- STORAGE ---
        function savePositions() {
            const pos = {};
            document.querySelectorAll('.click-area').forEach(b => {
                if(b.id) pos[b.id] = {t: b.style.top, l: b.style.left, w: b.style.width, h: b.style.height};
            });
            localStorage.setItem('simulasi_pos_full', JSON.stringify(pos));
        }
        function loadPositions() {
            const saved = localStorage.getItem('simulasi_pos_full');
            if(saved) {
                try {
                    const pos = JSON.parse(saved);
                    for(let id in pos) {
                        const b = document.getElementById(id);
                        if(b) { b.style.top=pos[id].t; b.style.left=pos[id].l; b.style.width=pos[id].w; b.style.height=pos[id].h; }
                    }
                } catch(e){}
            }
        }
        function resetPositions() {
            if(confirm("Reset posisi?")) {
                localStorage.removeItem('simulasi_pos_full');
                location.reload();
            }
        }
    </script>
</body>
</html>



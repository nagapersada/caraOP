<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Simulasi Trading 10 Langkah</title>
    <style>
        /* Reset dan Style Dasar */
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #121212; /* Latar belakang gelap */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Mencegah scroll pada body */
            touch-action: none; /* Mencegah zoom/scroll browser default pada touch device */
        }

        /* Kontrol Tombol di Atas */
        #controls {
            margin-bottom: 15px;
            z-index: 1000;
            background: rgba(30, 30, 30, 0.9);
            padding: 10px 15px;
            border-radius: 12px;
            display: flex;
            gap: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        button {
            padding: 10px 16px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .btn-edit { background-color: #FFC107; color: #000; }
        .btn-edit:hover { background-color: #e0a800; }
        
        .btn-lock { background-color: #28a745; color: white; }
        .btn-lock:hover { background-color: #218838; }

        .btn-reset { background-color: #dc3545; color: white; }
        .btn-reset:hover { background-color: #c82333; }

        /* Wadah HP */
        #phone-container {
            position: relative;
            width: 360px;  /* Lebar standar base on request */
            height: 760px; /* Tinggi standar base on request */
            background-color: #000;
            border-radius: 30px;
            box-shadow: 0 0 40px rgba(0,0,0,0.7);
            overflow: hidden; /* Memastikan konten tidak keluar dari bingkai HP */
            border: 8px solid #333;
            transition: border-color 0.3s;
        }

        /* Indikator Visual Mode Edit */
        body.editing-mode #phone-container {
            border-color: #FFC107; /* Bingkai jadi kuning saat mode edit */
        }

        /* Layar Gambar */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; /* Sembunyikan secara default */
            background-size: cover; /* Gambar memenuhi layar */
            background-position: center;
            background-repeat: no-repeat;
            background-color: #2a2a2a; /* Placeholder warna jika gambar gagal muat */
        }

        .screen.active { display: block; } /* Tampilkan layar yang aktif */

        /* Pesan Error Jika Gambar Tidak Ditemukan */
        .screen::after {
            content: "‚ö†Ô∏è Gambar " attr(data-img) " tidak ditemukan.\A Pastikan file ada di folder yang sama.";
            white-space: pre-wrap;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: #ff6b6b;
            font-size: 14px;
            text-align: center;
            width: 80%;
            z-index: 0;
        }

        /* --- AREA KLIK (KOTAK MERAH) --- */
        .click-area {
            position: absolute;
            box-sizing: border-box;
            z-index: 10;
            touch-action: none; /* Penting: Mencegah browser scroll saat drag di HP */
        }

        /* Tampilan SAAT BERMAIN (Mode Kunci) */
        body:not(.editing-mode) .click-area {
            cursor: pointer;
            border: 3px solid red;
            background-color: rgba(255, 0, 0, 0.2);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            animation: pulse 1s infinite alternate; /* Animasi berkedip */
        }

        @keyframes pulse {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0.5; transform: scale(1.02); }
        }

        /* Tampilan SAAT EDIT (Mode Buka Gembok) */
        body.editing-mode .click-area {
            cursor: move; /* Kursor pindah */
            border: 2px dashed #FFC107; /* Garis putus-putus kuning */
            background-color: rgba(255, 193, 7, 0.3);
            animation: none; /* Matikan animasi kedip */
        }

        /* Handle Resize (Kotak Biru Kecil di Pojok) */
        .resizer {
            width: 24px;
            height: 24px;
            background: #007bff;
            border: 2px solid white;
            border-radius: 50%; /* Bentuk bulat */
            position: absolute;
            right: -12px;
            bottom: -12px;
            cursor: se-resize;
            display: none; /* Sembunyi saat mode main */
            z-index: 20;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        body.editing-mode .resizer {
            display: block; /* Muncul saat mode edit */
        }

        /* Layar Selesai */
        #finish-screen {
            background-color: #1a1a1a;
            color: white;
            display: none; 
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            text-align: center;
        }
        #finish-screen h1 { color: #28a745; margin-bottom: 20px; }
    </style>
</head>
<body>

    <!-- Kontrol Mode Edit -->
    <div id="controls">
        <button id="btn-mode" class="btn-edit" onclick="toggleEditMode()">üîì Buka Gembok (Mode Edit)</button>
        <button class="btn-reset" onclick="resetPositions()">‚ö†Ô∏è Reset Posisi Awal</button>
    </div>

    <div id="phone-container">
        
        <!-- STEP 1: Klik Telegram (1.jpg) -->
        <div class="screen active" id="screen-1" style="background-image: url('1.jpg');" data-img="1.jpg">
            <!-- Estimasi posisi icon Telegram -->
            <div id="box-1" class="click-area" style="top: 73%; left: 26%; width: 18%; height: 9%;" onclick="handleNav(2)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 2: Klik group DVTeam NP (2.jpg) -->
        <div class="screen" id="screen-2" style="background-image: url('2.jpg');" data-img="2.jpg">
            <!-- Estimasi posisi baris chat paling atas -->
            <div id="box-2" class="click-area" style="top: 17%; left: 0%; width: 100%; height: 10%;" onclick="handleNav(3)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 3: Klik tombol pin (3.jpg) -->
        <div class="screen" id="screen-3" style="background-image: url('3.jpg');" data-img="3.jpg">
            <!-- Estimasi posisi di header bar -->
            <div id="box-3" class="click-area" style="top: 0%; left: 30%; width: 70%; height: 8%;" onclick="handleNav(4)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 4: Klik kartu sinyal (4.jpg) -->
        <div class="screen" id="screen-4" style="background-image: url('4.jpg');" data-img="4.jpg">
            <!-- Estimasi posisi pesan sinyal terakhir -->
            <div id="box-4" class="click-area" style="top: 50%; left: 5%; width: 90%; height: 25%;" onclick="handleNav(5)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 5: Klik tombol home (5.jpg) -->
        <div class="screen" id="screen-5" style="background-image: url('5.jpg');" data-img="5.jpg">
            <!-- Tombol back/home di pojok kiri atas Telegram -->
            <div id="box-5" class="click-area" style="top: 0%; left: 0%; width: 15%; height: 8%;" onclick="handleNav(6)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 6: Klik opalp (6.jpg) -->
        <div class="screen" id="screen-6" style="background-image: url('6.jpg');" data-img="6.jpg">
            <!-- Estimasi posisi icon app Opalp di home screen -->
            <div id="box-6" class="click-area" style="top: 60%; left: 26%; width: 18%; height: 9%;" onclick="handleNav(7)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 7: Klik kontrak (7.jpg) -->
        <div class="screen" id="screen-7" style="background-image: url('7.jpg');" data-img="7.jpg">
            <!-- Menu bar bawah, estimasi posisi 'Kontrak' -->
            <div id="box-7" class="click-area" style="bottom: 0%; left: 25%; width: 25%; height: 8%;" onclick="handleNav(8)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 8: Layar gulir keatas (8.jpg) -->
        <div class="screen" id="screen-8" style="background-image: url('8.jpg');" data-img="8.jpg">
            <!-- Area besar di tengah untuk simulasi scroll -->
            <div id="box-8" class="click-area" style="top: 20%; left: 10%; width: 80%; height: 60%;" onclick="handleNav(9)">
                <div class="resizer"></div>
            </div>
            <!-- Petunjuk teks kecil -->
            <div style="position:absolute; bottom:10%; width:100%; text-align:center; color:white; font-size:14px; pointer-events:none;">Klik area untuk simulasi scroll</div>
        </div>

        <!-- STEP 9: Klik nomor periodenya (9.jpg) -->
        <div class="screen" id="screen-9" style="background-image: url('9.jpg');" data-img="9.jpg">
            <!-- Estimasi posisi nomor periode di halaman transaksi -->
            <div id="box-9" class="click-area" style="top: 35%; right: 5%; width: 40%; height: 6%;" onclick="handleNav(10)">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- STEP 10: Klik 1% klik hijau (10.jpg) -->
        <div class="screen" id="screen-10" style="background-image: url('10.jpg');" data-img="10.jpg">
            <!-- Bagian 1: Klik Tombol 1% -->
            <div id="box-10a" class="click-area" style="top: 45%; left: 5%; width: 15%; height: 5%;" onclick="step10Part2()">
                <div class="resizer"></div>
            </div>
            <!-- Bagian 2: Klik Tombol Hijau (Awalnya disembunyikan) -->
            <div id="box-10b" class="click-area" style="display:none; top: 55%; left: 5%; width: 43%; height: 7%; background-color: rgba(0, 255, 0, 0.2); border-color: lime;" onclick="finishSimulation()">
                <div class="resizer"></div>
            </div>
        </div>

        <!-- LAYAR SELESAI -->
        <div class="screen" id="finish-screen">
            <h1>‚úÖ TRANSAKSI BERHASIL!</h1>
            <p>Anda telah menyelesaikan semua langkah.</p>
            <button class="btn-edit" style="margin-top: 20px;" onclick="location.reload()">Ulangi Simulasi</button>
        </div>
        
    </div>

    <script>
        let isEditing = false; // Status apakah sedang mode edit atau main
        const container = document.getElementById('phone-container');

        // Load posisi yang tersimpan saat halaman dibuka
        window.onload = function() {
            loadPositions();
            initDragAndResizeListeners();
        };

        // --- FUNGSI NAVIGASI & LOGIKA APLIKASI ---

        // Fungsi untuk berpindah antar layar
        function handleNav(stepNumber) {
            if (isEditing) return; // Jangan pindah layar kalau lagi mode edit
            
            // Sembunyikan semua layar
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            // Tampilkan layar tujuan
            const target = document.getElementById('screen-' + stepNumber);
            if(target) target.classList.add('active');
        }

        // Logika khusus untuk langkah 10 (Dua kali klik dalam satu layar)
        function step10Part2() {
            if (isEditing) return;
            // Sembunyikan kotak 1%
            document.getElementById('box-10a').style.display = 'none';
            // Tampilkan kotak Hijau
            document.getElementById('box-10b').style.display = 'block';
        }

        // Fungsi saat simulasi selesai
        function finishSimulation() {
            if (isEditing) return;
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('finish-screen').style.display = 'flex';
            document.getElementById('finish-screen').classList.add('active');
        }

        // --- FUNGSI MODE EDIT (GESER & RESIZE) ---

        // Tombol Ganti Mode (Edit <-> Main)
        function toggleEditMode() {
            isEditing = !isEditing;
            const body = document.body;
            const btn = document.getElementById('btn-mode');
            
            if (isEditing) {
                body.classList.add('editing-mode');
                btn.innerHTML = "üîí Kunci Posisi (Main)";
                btn.className = "btn-lock";
                // Pastikan kedua kotak di step 10 terlihat saat mode edit
                document.getElementById('box-10a').style.display = 'block';
                document.getElementById('box-10b').style.display = 'block';
            } else {
                body.classList.remove('editing-mode');
                btn.innerHTML = "üîì Buka Gembok (Mode Edit)";
                btn.className = "btn-edit";
                savePositions(); // Simpan posisi otomatis saat dikunci
                // Reset tampilan step 10 untuk mode main
                document.getElementById('box-10a').style.display = 'block';
                document.getElementById('box-10b').style.display = 'none';
                alert("Posisi tersimpan! Sekarang dalam Mode Main.");
            }
        }

        // Helper untuk mendapatkan koordinat Mouse atau Touch
        function getCoords(e) {
            if (e.touches && e.touches.length > 0) {
                return { x: e.touches[0].clientX, y: e.touches[0].clientY };
            }
            return { x: e.clientX, y: e.clientY };
        }

        // Inisialisasi Event Listener untuk Drag dan Resize
        function initDragAndResizeListeners() {
            const boxes = document.querySelectorAll('.click-area');

            boxes.forEach(box => {
                const resizer = box.querySelector('.resizer');

                // --- LOGIKA RESIZE (MENGUBAH UKURAN) ---
                const startResize = (e) => {
                    if (!isEditing) return;
                    e.stopPropagation(); // Mencegah trigger drag pada parent
                    
                    const startCoords = getCoords(e);
                    const startW = parseFloat(getComputedStyle(box).width);
                    const startH = parseFloat(getComputedStyle(box).height);
                    const containerW = container.offsetWidth;
                    const containerH = container.offsetHeight;

                    const onMove = (moveEvent) => {
                        const currentCoords = getCoords(moveEvent);
                        const newW = startW + (currentCoords.x - startCoords.x);
                        const newH = startH + (currentCoords.y - startCoords.y);
                        
                        // Ubah ke Persentase agar responsif
                        box.style.width = (newW / containerW * 100) + '%';
                        box.style.height = (newH / containerH * 100) + '%';
                    };

                    const onEnd = () => {
                        removeListeners();
                    };

                    addListeners(onMove, onEnd);
                };

                // Bind event resize ke Mouse & Touch
                if(resizer) {
                    resizer.addEventListener('mousedown', startResize);
                    resizer.addEventListener('touchstart', startResize, { passive: false });
                }


                // --- LOGIKA DRAG (MENGGESER POSISI) ---
                const startDrag = (e) => {
                    if (!isEditing) return;
                    if (e.target.classList.contains('resizer')) return; // Jangan drag kalau yang diklik resizer
                    
                    // Mencegah scroll layar browser saat drag di HP
                    if(e.type === 'touchstart') e.preventDefault();
                    
                    const startCoords = getCoords(e);
                    const rect = box.getBoundingClientRect();
                    const containerRect = container.getBoundingClientRect();
                    const containerW = container.offsetWidth;
                    const containerH = container.offsetHeight;

                    // Hitung posisi awal relatif terhadap container
                    const startLeft = rect.left - containerRect.left;
                    const startTop = rect.top - containerRect.top;

                    const onMove = (moveEvent) => {
                        if(moveEvent.type === 'touchmove') moveEvent.preventDefault(); // Prevent scroll

                        const currentCoords = getCoords(moveEvent);
                        const dx = currentCoords.x - startCoords.x;
                        const dy = currentCoords.y - startCoords.y;
                        
                        const newLeft = startLeft + dx;
                        const newTop = startTop + dy;

                        // Ubah ke Persentase
                        box.style.left = (newLeft / containerW * 100) + '%';
                        box.style.top = (newTop / containerH * 100) + '%';
                    };

                    const onEnd = () => {
                        removeListeners();
                    };

                    addListeners(onMove, onEnd);
                };

                // Bind event drag ke Mouse & Touch
                box.addEventListener('mousedown', startDrag);
                box.addEventListener('touchstart', startDrag, { passive: false });

                // Helper untuk menambah/menghapus listener move/end global
                function addListeners(onMove, onEnd) {
                    document.addEventListener('mousemove', onMove);
                    document.addEventListener('mouseup', onEnd);
                    document.addEventListener('touchmove', onMove, { passive: false });
                    document.addEventListener('touchend', onEnd);
                }
                function removeListeners(onMove, onEnd) {
                    document.removeEventListener('mousemove', onMove);
                    document.removeEventListener('mouseup', onEnd);
                    document.removeEventListener('touchmove', onMove);
                    document.removeEventListener('touchend', onEnd);
                }
            });
        }

        // --- SISTEM PENYIMPANAN (LOCAL STORAGE) ---
        
        // Menyimpan posisi ke memori browser
        function savePositions() {
            const positions = {};
            const boxes = document.querySelectorAll('.click-area');
            
            boxes.forEach(box => {
                if(box.id) {
                    positions[box.id] = {
                        top: box.style.top,
                        left: box.style.left,
                        width: box.style.width,
                        height: box.style.height
                    };
                }
            });
            // Simpan sebagai string JSON di Local Storage
            localStorage.setItem('simulasi_posisi_10langkah', JSON.stringify(positions));
        }

        // Memuat posisi dari memori browser
        function loadPositions() {
            const saved = localStorage.getItem('simulasi_posisi_10langkah');
            if (saved) {
                try {
                    const positions = JSON.parse(saved);
                    for (const id in positions) {
                        const box = document.getElementById(id);
                        if (box) {
                            box.style.top = positions[id].top;
                            box.style.left = positions[id].left;
                            box.style.width = positions[id].width;
                            box.style.height = positions[id].height;
                        }
                    }
                } catch (e) {
                    console.error("Gagal memuat posisi tersimpan:", e);
                }
            }
        }

        // Reset posisi ke default (berguna jika posisi jadi berantakan)
        function resetPositions() {
            if(confirm("Apakah Anda yakin ingin mereset semua posisi kotak ke awal?")) {
                localStorage.removeItem('simulasi_posisi_10langkah');
                location.reload();
            }
        }
    </script>
</body>
</html>



<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Simulasi Trading Fixed</title>
    <style>
        /* RESET DASAR */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: #000;
            margin: 0; padding: 0;
            width: 100vw; height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- WADAH UTAMA (GHOST CONTAINER) --- */
        /* Ini teknik kunciannya. Kita tidak pakai width/height 100%. */
        /* Kita pakai display inline-block menyesuaikan gambar transparan */
        #game-stage {
            position: relative;
            display: inline-block;
            
            /* Batasi agar tidak melebihi layar */
            max-width: 100vw;
            max-height: 100vh;
            
            /* Bayangan biar kelihatan batas gambarnya */
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            line-height: 0; /* Hapus spasi hantu di bawah gambar */
        }

        /* --- GAMBAR TRANSPARAN PENGUNCI (SI KUNCI UTAMA) --- */
        /* Gambar ini tidak terlihat, tapi dia yang memegang kendali ukuran */
        #ghost-reference {
            display: block;
            width: auto;
            height: auto;
            
            /* Logika: */
            /* 1. Usahakan setinggi layar (100vh) */
            /* 2. TAPI lebarnya jangan pernah melebihi 100vw (max-width) */
            /* Browser akan otomatis menghitung rasionya */
            height: 100vh;
            max-width: 100vw;
            
            /* Jika layar HP lebar (PC/Tablet), gambar mentok tinggi */
            /* Jika layar HP sempit (Mobile), object-fit akan menjaganya */
            object-fit: contain; 
        }

        /* --- LAYAR PERMAINAN --- */
        /* Semua layar menempel PERSIS di atas gambar transparan tadi */
        .screen {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%;
            
            /* Gambar background dipaksa ngikutin ukuran Ghost Reference */
            background-size: 100% 100%; 
            background-position: center;
            
            opacity: 0; visibility: hidden; pointer-events: none;
        }
        .screen.active { opacity: 1; visibility: visible; pointer-events: auto; }

        /* --- KOORDINAT KOTAK MERAH (RELATIF TERHADAP GAMBAR) --- */
        .click-area, .scroll-area {
            position: absolute; z-index: 10; cursor: pointer;
            background: transparent; 
            /* Uncomment border di bawah kalau mau ngecek posisi */
            /* border: 2px solid green; */
        }
        .click-area:active { background-color: rgba(255, 255, 255, 0.1); }

        /* SCROLL WRAPPER */
        .screen-scroll-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow-y: auto; z-index: 5; scrollbar-width: none;
        }
        .screen-scroll-wrapper::-webkit-scrollbar { display: none; }
        .screen-scroll-wrapper img { width: 100%; display: block; }

        /* HINT UI */
        #ghost-gear {
            position: absolute; top: 20px; left: 20px; font-size: 30px; z-index: 9999; 
            opacity: 0.2; cursor: pointer; color: white;
        }
        body.show-hint .click-area { border: 2px solid red; background: rgba(255,0,0,0.2); animation: p 1s infinite; }
        body.show-hint .scroll-area { border: 2px dashed cyan; }
        @keyframes p { 50% { opacity:0.5; } }

        /* START & FINISH */
        #overlay, #finish {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999; display: flex; 
            flex-direction: column; align-items: center; justify-content: center;
        }
        #finish { display: none; background: #111; color: white; }
        button { padding: 15px 40px; border-radius: 50px; border:none; background: #28a745; color: white; font-weight: bold; font-size: 18px; }
    </style>
</head>
<body>

    <div id="ghost-gear" onclick="document.body.classList.toggle('show-hint')">⚙️</div>

    <div id="overlay">
        <h2 style="color:white; margin-bottom:20px;">Simulasi Trading</h2>
        <button onclick="start()">MULAI</button>
    </div>

    <div id="game-stage">
        
        <img id="ghost-reference" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4QAAAeEAQMAAACT6L3TAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAADRJREFUeNrtwQENAAAAwqD3T20PBxQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4G8G1uAAAbq88WAAAAABJRU5ErkJggg==" alt="Layout Lock">

        <div class="screen active" id="screen-1" style="background-image: url('1.jpg');">
            <div id="box-1" class="click-area" style="top: 73%; left: 26%; width: 18%; height: 9%;" onclick="next(2)"></div>
        </div>
        
        <div class="screen" id="screen-2" style="background-image: url('2.jpg');"><div id="box-2" class="click-area" style="top: 17%; left: 0%; width: 100%; height: 10%;" onclick="next(3)"></div></div>

        <div class="screen" id="screen-3" style="background-image: url('3.jpg');"><div id="box-3" class="click-area" style="top: 0%; left: 30%; width: 70%; height: 8%;" onclick="next(4)"></div></div>

        <div class="screen" id="screen-4" style="background-image: url('4.jpg');"><div id="box-4" class="click-area" style="top: 50%; left: 5%; width: 90%; height: 25%;" onclick="next(5)"></div></div>

        <div class="screen" id="screen-5" style="background-image: url('5.jpg');"><div id="box-5" class="click-area" style="top: 0%; left: 0%; width: 15%; height: 8%;" onclick="next(6)"></div></div>

        <div class="screen" id="screen-6" style="background-image: url('6.jpg');"><div id="box-6" class="click-area" style="top: 60%; left: 26%; width: 18%; height: 9%;" onclick="next(7)"></div></div>

        <div class="screen" id="screen-7" style="background-image: url('7.jpg');"><div id="box-7" class="click-area" style="bottom: 0%; left: 25%; width: 25%; height: 8%;" onclick="next(8)"></div></div>

        <div class="screen" id="screen-8">
            <div class="screen-scroll-wrapper"><img src="8.jpg" ondragstart="return false;"></div>
            <div id="box-8" class="scroll-area" style="top: 30%; left: 10%; width: 80%; height: 40%;"></div>
        </div>

        <div class="screen" id="screen-9" style="background-image: url('9.jpg');"><div id="box-9" class="click-area" style="top: 35%; right: 5%; width: 40%; height: 6%;" onclick="next(10)"></div></div>

        <div class="screen" id="screen-10" style="background-image: url('10.jpg');">
            <div id="box-10a" class="click-area" style="top: 45%; left: 5%; width: 15%; height: 5%;" onclick="step10Part2()"></div>
            <div id="box-10b" class="click-area" style="display:none; top: 55%; left: 5%; width: 43%; height: 7%;" onclick="next(11)"></div>
        </div>

        <div class="screen" id="screen-11" style="background-image: url('11.jpg');"><div id="box-11" class="click-area" style="top: 55%; right: 10%; width: 35%; height: 6%;" onclick="next(12)"></div></div>

        <div class="screen" id="screen-12" style="background-image: url('12.jpg');"><div id="box-12" class="click-area" style="bottom: 10%; left: 25%; width: 50%; height: 8%;" onclick="finish()"></div></div>

        <div id="finish">
            <h1 style="color:#28a745;">BERHASIL!</h1>
            <p style="margin-bottom:20px;">Simulasi Selesai.</p>
            <button onclick="location.reload()" style="background:#333;">ULANGI</button>
        </div>

    </div>

    <script>
        function start() {
            if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen().catch(()=>{});
            document.getElementById('overlay').style.display = 'none';
        }

        function next(id) {
            document.querySelector('.screen.active').classList.remove('active');
            document.getElementById('screen-'+id).classList.add('active');
        }

        function step10Part2() {
            document.getElementById('box-10a').style.display='none';
            document.getElementById('box-10b').style.display='block';
        }

        function finish() {
            document.querySelector('.screen.active').classList.remove('active');
            document.getElementById('finish').style.display = 'flex';
        }

        // Logic Swipe / Scroll
        const b8 = document.getElementById('box-8');
        let sy=0;
        b8.addEventListener('touchstart', e=>sy=e.touches[0].clientY);
        b8.addEventListener('touchend', e=>{ if(sy-e.changedTouches[0].clientY > 30) next(9); });
        b8.addEventListener('mousedown', e=>{
            sy=e.clientY;
            const up=ev=>{ if(sy-ev.clientY > 30) next(9); document.removeEventListener('mouseup',up); };
            document.addEventListener('mouseup',up);
        });
    </script>
</body>
</html>
